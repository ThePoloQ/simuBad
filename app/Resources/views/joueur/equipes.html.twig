{% extends 'base.html.twig' %}

{% block title %} | Equipes de joueurs{% endblock %}

{% block body %}
    <h1>Equipes list</h1>
    <div>{{equipes|length}} Equipes</div>
    <table class="table table-striped table-sm table-hover">
        <thead>
            <tr>
                <th></th>
                <th>Nom</th>
                <th>Groupe</th>
                <th>Moyenne</th>
                <th>Date Inscription</th>
            </tr>
        </thead>
        <tbody>
        {% for key,equipe in equipes %}
          {% set joueur = equipe[0] %}
          {% set groupe = joueur.getGroupe(equipe.tableau) %}
          {% if equipe.tableau == 'DH' %}
            {% set partenaire = joueur.partenaireDH %}
          {% endif %}
          {% if equipe.tableau == 'DD' %}
            {% set partenaire = joueur.partenaireDD %}
          {% endif %}
          {% if equipe.tableau == 'MX' %}
            {% set partenaire = joueur.partenaireMX %}
          {% endif %}
            <tr>
                <td>{{ key+1 }}</td>
                <td>{% if joueur.estLA == true or partenaire.estLA %}<span style="background-color:red;color:white;font-weight: bold;">[LA]</span>&nbsp;{% endif %}{{ equipe.nom_equipe }}</td>
                <td>{% if groupe %}{{ groupe.nom }}{% endif %}</td>
                <td>{{ (equipe.moyenne/2)|number_format(2, '.', '') }}</td>
                <td>{{ max(partenaire.DateInscription,joueur.DateInscription)|date('d-m-Y') }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <div>{{equipes|length}} Equipes</div>

    <ul>
        <li>
            <a href="{{ path('joueur_new') }}">Create a new joueur</a> |
            <a href="{{ path('joueur_importer') }}">Importer joueurs</a> |
            <a href="{{ path('joueur_moyenne') }}">Maj moyennes</a>
        </li>
    </ul>
{% endblock %}
